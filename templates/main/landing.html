{% extends "base.html" %}
{% load static humanize %}

{% block title %}Lume — Find Your Flow{% endblock %}

{% block content %}

<!-- ========== HERO ========== -->
<section class="relative isolate">
  <div class="absolute inset-0 -z-10">
    <div class="absolute inset-0 bg-gradient-to-b from-black/50 to-black/20"></div>
    <img src="{% static 'hero/hero-landing.png' %}" alt="Lume Hero" class="h-[640px] w-full object-cover" />
  </div>

  <div class="mx-auto max-w-7xl px-6 pt-36 pb-16">
    <div class="max-w-xl text-white">
      <h1 class="text-5xl md:text-6xl font-extrabold leading-tight drop-shadow">
        Find Your<br /> Flow <span class="font-light">with Lume.</span>
      </h1>
      <p class="mt-5 text-white/85 max-w-lg">
        Feel stronger, move freely, and unwind with us. Join our Pilates family and discover a space
        where your body and mind can thrive at their own pace.
      </p>
      <div class="mt-8 flex gap-3">
        <a href="{% url 'bookingkelas:catalog' %}"
          class="rounded-full bg-white text-stone-900 px-5 py-3 font-semibold shadow hover:bg-stone-100">
          Book a Class
        </a>
        <a href="#our-products"
          class="rounded-full bg-white/10 text-white px-5 py-3 font-semibold ring-1 ring-white/40 hover:bg-white/20">
          Shop Products
        </a>
      </div>
    </div>
  </div>
</section>

<!-- ========== OUR PRODUCTS ========== -->
<section id="our-products" class="bg-gradient-to-b from-stone-50 to-stone-100">
  <div class="mx-auto max-w-7xl px-6 py-16">
    <h2 class="text-center text-4xl md:text-5xl font-extrabold tracking-tight text-stone-800">Our Products</h2>

    <div class="mt-10 grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
      {% for p in highlights %}
      <a href="{% url 'catalog:detail' p.id %}"
        class="group rounded-2xl border border-stone-200 bg-white shadow-md hover:shadow-lg transition-transform hover:-translate-y-1 overflow-hidden">
        <div class="aspect-[4/3] bg-stone-100">
          <img src="{{ p.proxied_thumbnail|default:'https://picsum.photos/seed/pilates/600/450' }}"
            alt="{{ p.product_name }}" class="h-full w-full object-cover"
            onerror="this.onerror=null;this.src='https://picsum.photos/seed/pilates-fallback/600/450';">
        </div>
        <div class="p-4">
          <div class="flex items-start justify-between gap-4">
            <h5 class="font-semibold line-clamp-2">{{ p.product_name }}</h5>
          </div>
          <div class="mt-2 text-sm text-stone-700">Rp {{ p.price|intcomma }}</div>
          <span
            class="mt-3 inline-flex items-center justify-center w-full rounded-xl bg-stone-900 text-white py-2.5 font-semibold hover:bg-black">
            View Detail
          </span>
        </div>
      </a>
      {% empty %}
      {% for i in "1234" %}
      <div class="rounded-2xl border border-stone-200 bg-white shadow-sm overflow-hidden">
        <div class="aspect-[4/3] bg-stone-100 grid place-content-center">
          <div class="h-12 w-12 rounded-xl bg-stone-200"></div>
        </div>
        <div class="p-4 text-center text-stone-500">Coming Soon</div>
      </div>
      {% endfor %}
      {% endfor %}
    </div>

    <div class="mt-8 text-center">
      <a href="{% url 'main:show_main' %}"
        class="inline-flex items-center gap-2 rounded-full bg-stone-900 text-white px-5 py-3 font-semibold hover:bg-black">
        View All Products ↗
      </a>
    </div>
  </div>
</section>

<!-- ========== UPCOMING CLASSES ========== -->
<section id="upcoming-classes" class="relative isolate bg-gradient-to-b from-stone-100 to-stone-200 border-t border-stone-300">
  <div class="mx-auto max-w-7xl px-6 py-20">
    <h2 class="text-center text-4xl md:text-5xl font-extrabold tracking-tight text-stone-800">Upcoming Classes</h2>

    <div class="mt-10 grid gap-6 md:grid-cols-2 lg:grid-cols-3">
      {% for c in sessions %}
      <div class="rounded-2xl border border-stone-200 bg-white shadow-md hover:shadow-lg transition-transform hover:-translate-y-1 overflow-hidden">
        <div class="p-5">
          <div class="flex items-center justify-between">
            <h5 class="font-semibold">{{ c.base_title }}</h5>
            <span
              class="text-[10px] uppercase tracking-wider rounded-full bg-stone-100 px-2 py-1 text-stone-600">{{ c.category }}</span>
          </div>
          <p class="mt-2 text-sm text-stone-500">by {{ c.instructor }}</p>

          <div class="mt-4 grid grid-cols-2 gap-3 text-sm">
            <div><span class="block text-stone-400">Time</span>{{ c.time }}</div>
            <div><span class="block text-stone-400">Price</span>Rp {{ c.price|intcomma }}</div>
            <div class="col-span-2">
              <span class="block text-stone-400">Days</span>
              {% if c.days_names %}
              {% for d in c.days_names %}
              <span class="inline-flex items-center rounded-full border px-2 py-0.5 text-xs mr-1">{{ d }}</span>
              {% endfor %}
              {% else %}
              <span class="text-stone-500">—</span>
              {% endif %}
            </div>
          </div>

          <a href="{% if c.category == 'daily' %}javascript:void(0);{% else %}{% url 'bookingkelas:book_class' c.instance_id %}{% endif %}"
            class="mt-4 inline-flex items-center justify-center w-full rounded-xl bg-stone-800 text-white py-2.5 font-semibold hover:bg-stone-900
            {% if c.category == 'daily' %} btn-open-modal {% endif %}"
            {% if c.category == 'daily' %} data-base-title="{{ c.base_title }}" {% endif %}>
            {% if c.category == 'daily' %}Choose Day{% else %}Book Now{% endif %}
          </a>
        </div>
      </div>
      {% empty %}
      <div class="text-gray-500">Belum ada jadwal kelas tersedia.</div>
      {% endfor %}
    </div>

    <div class="mt-12 text-center">
      <a href="{% url 'bookingkelas:catalog' %}"
        class="inline-flex items-center gap-2 rounded-full bg-stone-800 text-white px-5 py-3 font-semibold hover:bg-stone-900">
        View All Classes ↗
      </a>
    </div>
  </div>
</section>

{% endblock %}
